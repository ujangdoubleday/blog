{% extends "base.html" %}

{% block title %}{{ post.title }} - {{ config.site.title }}{% endblock %}
{% block description %}{{ post.description or post.excerpt or config.site.description }}{% endblock %}

{% block meta %}
<meta property="og:type" content="article">
<meta property="og:title" content="{{ post.title }}">
<meta property="og:description" content="{{ post.description or post.excerpt }}">
<meta property="og:url" content="{{ config.site.url }}{{ post.url }}">
{% if post.image %}
<meta property="og:image" content="{{ config.site.url }}{{ post.image }}">
{% endif %}
<meta property="article:published_time" content="{{ post.date.isoformat() }}">
<meta property="article:author" content="{{ post.author or config.site.author }}">
{% for tag in post.tags %}
<meta property="article:tag" content="{{ tag }}">
{% endfor %}
{% endblock %}

{% block content %}
<article class="post">
    <header class="post-header">
        <h1 class="post-title">{{ post.title }}</h1>
        <div class="post-meta">
            <time class="post-date" datetime="{{ post.date.isoformat() }}">
                {{ post.date.strftime('%B %d, %Y') }}
            </time>
            {% if post.author %}
            <span class="post-author">by {{ post.author }}</span>
            {% endif %}
            {% if post.reading_time %}
            <span class="post-reading-time">{{ post.reading_time }} min read</span>
            {% endif %}
        </div>
        {% if post.tags %}
        <div class="post-tags">
            {% for tag in post.tags %}
            <span class="tag">{{ tag }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </header>

    {% if post.image %}
    <div class="post-image">
        <img src="{{ post.image | image }}" alt="{{ post.title }}">
    </div>
    {% endif %}

    <div class="post-content">
        {{ post.content|safe }}
    </div>

    <footer class="post-footer">
        {% if post.tags %}
        <div class="post-tags">
            <strong>Tags:</strong>
            {% for tag in post.tags %}
            <a href="/tags/{{ tag|lower|replace(' ', '-') }}.html" class="tag-link">{{ tag }}</a>
            {% endfor %}
        </div>
        {% endif %}

        <div class="post-navigation">
            {% if prev_post %}
            <a href="{{ prev_post.url }}" class="prev-post">
                ← {{ prev_post.title }}
            </a>
            {% endif %}
            {% if next_post %}
            <a href="{{ next_post.url }}" class="next-post">
                {{ next_post.title }} →
            </a>
            {% endif %}
        </div>
    </footer>
</article>
{% endblock %}
