{% extends "base.html" %}

{% block title %}{{ post.title }} - {{ config.site.title }}{% endblock %}
{% block description %}{{ post.description or post.excerpt or config.site.description }}{% endblock %}
{% block canonical %}{{ config.site.url }}{{ post.url }}{% endblock %}
{% block twitter_title %}{{ post.title }}{% endblock %}
{% block twitter_description %}{{ post.description or post.excerpt }}{% endblock %}

{% block og_meta %}
<meta property="og:type" content="article">
<meta property="og:title" content="{{ post.title }}">
<meta property="og:description" content="{{ post.description or post.excerpt }}">
<meta property="og:url" content="{{ config.site.url }}{{ post.url }}">
{% if post.image %}
<meta property="og:image" content="{{ config.site.url }}{{ post.image }}">
<meta property="og:image:alt" content="{{ post.title }}">
<meta name="twitter:image" content="{{ config.site.url }}{{ post.image }}">
{% endif %}
<meta property="article:published_time" content="{{ post.date.isoformat() }}">
<meta property="article:author" content="{{ post.author or config.site.author }}">
{% if post.category %}
<meta property="article:section" content="{{ post.category }}">
{% endif %}
{% endblock %}

{% block meta %}
<!-- Schema.org JSON-LD for BlogPosting -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ post.title }}",
  "description": "{{ post.description or post.excerpt }}",
  "url": "{{ config.site.url }}{{ post.url }}",
  "datePublished": "{{ post.date.isoformat() }}",
  "author": {
    "@type": "Person",
    "name": "{{ post.author or config.site.author }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ config.site.title }}",
    "url": "{{ config.site.url }}"
  }{% if post.image %},
  "image": {
    "@type": "ImageObject",
    "url": "{{ config.site.url }}{{ post.image }}"
  }{% endif %}
}
</script>
{% endblock %}

{% block content %}
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <h1 class="post-title" itemprop="headline">{{ post.title }}</h1>

        <!-- HR separator -->
        <hr class="post-separator">

        <!-- Date and See all posts link -->
        <div class="post-meta-header">
            <time class="post-date" datetime="{{ post.date.isoformat() }}" itemprop="datePublished">
                {{ post.date.strftime('%b %d, %Y').lower() }}
            </time>
            <a href="/" class="see-all-posts">See all posts</a>
        </div>

        <!-- Hidden author for reader mode -->
        <meta itemprop="author" content="{{ post.author or config.site.author }}">
    </header>

    <div class="post-content entry-content" itemprop="articleBody">
        {{ post.content|safe }}
    </div>
</article>
{% endblock %}
